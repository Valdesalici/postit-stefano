<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Post-it di Stefano</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #fff8dc, #fceabb);
      padding: 30px;
      text-align: center;
    }
    h1 {
      color: #333;
      margin-bottom: 15px;
    }
    #inputField {
      padding: 12px;
      font-size: 16px;
      width: 80%;
      max-width: 500px;
      border-radius: 8px;
      border: 1px solid #aaa;
      margin-bottom: 15px;
    }
    #list {
      max-width: 600px;
      margin: 0 auto 20px;
      text-align: left;
    }
    .item {
      background-color: #ffe066;
      margin: 6px 0;
      padding: 12px 16px;
      border-radius: 12px;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s;
      display: flex;
      align-items: center;
    }
    .item:hover {
      background-color: #ffed99;
    }
    .emoji {
      margin-right: 10px;
      font-size: 20px;
    }
    .done {
      text-decoration: line-through;
      opacity: 0.6;
    }
    #shareBtn {
      background-color: #6c63ff;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    #shareBtn:hover {
      background-color: #574cd3;
    }
  </style>
</head>
<body>
  <h1>ğŸ—’ï¸ Post-it di Stefano</h1>
  <input id="inputField" type="text" placeholder="Scrivi un prodotto e premi Invio">
  <div id="list"></div>
  <button id="shareBtn" onclick="shareToWhatsApp()">ğŸ“¤ Condividi su WhatsApp</button>

  <script>
    const emojiMap = {
      pane:"ğŸ", toast:"ğŸ", latte:"ğŸ¥›", uova:"ğŸ¥š", formaggio:"ğŸ§€", pollo:"ğŸ—", salmone:"ğŸŸ", pasta:"ğŸ", riso:"ğŸš", pomodoro:"ğŸ…",
      insalata:"ğŸ¥¬", patate:"ğŸ¥”", mele:"ğŸ", banana:"ğŸŒ", arancia:"ğŸŠ", fragole:"ğŸ“", cioccolato:"ğŸ«", gelato:"ğŸ¦", caffÃ¨:"â˜•",
      succo:"ğŸ§ƒ", birra:"ğŸº", vino:"ğŸ·", hummus:"ğŸ§†", pizza:"ğŸ•", torta:"ğŸ°", tonno:"ğŸ¥«", olio:"ğŸ«™", sale:"ğŸ§‚", zucchero:"ğŸ¬",
      miele:"ğŸ¯", biscotti:"ğŸª", croissant:"ğŸ¥", yogurt:"ğŸ¥›", detersivo:"ğŸ§º", spugna:"ğŸ§½", carta:"ğŸ§»", candeggina:"ğŸ§ª",
      tovaglioli:"ğŸ§º", scopa:"ğŸ§¹", secchio:"ğŸª£", lampadina:"ğŸ’¡", piatti:"ğŸ½ï¸", bicchieri:"ğŸ¥¤", tovaglia:"ğŸ§º", sedia:"ğŸª‘",
      tavolo:"ğŸ›‹ï¸", letto:"ğŸ›ï¸", cuscino:"ğŸ›Œ", coperta:"ğŸ§£", specchio:"ğŸª", frigorifero:"ğŸ§Š", forno:"ğŸ”¥", microonde:"ğŸ“¡",
      lavatrice:"ğŸ§º", stendino:"ğŸ§º", ferro:"ğŸ§²", cartaigienica:"ğŸ§»", cartaforno:"ğŸ“„", sacchetti:"ğŸ›ï¸", immondizia:"ğŸ—‘ï¸",
      asciugamani:"ğŸ§º", lenzuola:"ğŸ›ï¸", ammorbidente:"ğŸ§´", spray:"ğŸ’¨", guanti:"ğŸ§¤", anticalcare:"ğŸ’§", profumatore:"ğŸŒ¸",
      contenitori:"ğŸ§º", bottiglie:"ğŸ¾", alluminio:"ğŸ§»", pellicola:"ğŸ§»", freezer:"â„ï¸", accendigas:"ğŸ”¥", fiammiferi:"ğŸ§¨",
      regali:"ğŸ", nastro:"ğŸ€", elastici:"ğŸ§µ", ganci:"ğŸ§²", etichette:"ğŸ·ï¸", pennarelli:"ğŸ–Šï¸", batterie:"ğŸ”‹",
      prolunga:"ğŸ”Œ", multipresa:"ğŸ”Œ"
    };

    const input = document.getElementById("inputField");
    const list = document.getElementById("list");

    input.addEventListener("keydown", function (e) {
      if (e.key === "Enter" && input.value.trim() !== "") {
        addItem(input.value.trim());
        input.value = "";
      }
    });

    function getEmoji(text) {
      const t = text.toLowerCase().replace(/\s/g, "");
      for (let key in emojiMap) {
        if (t.includes(key)) return emojiMap[key];
      }
      return "ğŸ›’";
    }

    function addItem(text) {
      const item = document.createElement("div");
      item.className = "item";
      item.innerHTML = `<span class="emoji">${getEmoji(text)}</span><span class="label">${text}</span>`;
      list.appendChild(item);

      let pressTimer;

      // Desktop: mouse
      item.addEventListener("mousedown", () => {
        pressTimer = setTimeout(() => item.remove(), 2000);
      });
      item.addEventListener("mouseup", () => clearTimeout(pressTimer));
      item.addEventListener("mouseleave", () => clearTimeout(pressTimer));

      // Mobile: touch
      item.addEventListener("touchstart", () => {
        pressTimer = setTimeout(() => item.remove(), 2000);
      });
      item.addEventListener("touchend", () => clearTimeout(pressTimer));
      item.addEventListener("touchcancel", () => clearTimeout(pressTimer));

      item.addEventListener("click", () => {
        item.classList.toggle("done");
      });
    }

    function shareToWhatsApp() {
      const items = document.querySelectorAll(".item .label");
      let message = "ğŸ—’ï¸ *Post-it di Stefano:*\n";
      items.forEach((label) => {
        const text = label.textContent;
        message += `${getEmoji(text)} ${text}\n`;
      });

      const encoded = encodeURIComponent(message.trim());
      const url = "https://wa.me/?text=" + encoded;
      window.open(url, "_blank");
    }
  </script>
</body>
</html>
